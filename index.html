<!-- Part 1 / 5 : HEAD + Í≥µÌÜµ CSS -->
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport"
      content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<title>üéÆ Î™®Î∞îÏùº ÌÖåÌä∏Î¶¨Ïä§</title>

<style>
:root{
  --cell:22px;     /* Î™®Î∞îÏùº Í∏∞Î≥∏ ÌÅ¨Í∏∞ */
  --gap:1px;
  --grid:#1e2233;
  --bg:#121725;
  /* Î∏îÎ°ù ÏÉâ */
  --T:#b36be0;--O:#f7d041;--I:#30c3ec;
  --S:#5ccd6a;--Z:#ef5959;--L:#f69c3c;--J:#5185f7;
}

/* Í≥µÌÜµ Î†àÏù¥ÏïÑÏõÉ */
*{box-sizing:border-box}
body{
  margin:0;font-family:'Segoe UI',sans-serif;
  background:var(--bg);color:#fff;display:flex;
  flex-direction:column;align-items:center;
  user-select:none;-webkit-tap-highlight-color:transparent;
}
h1{margin:14px 0 6px;font-size:1.6rem}
#start{padding:10px 20px;border:none;border-radius:6px;
  background:#4caf50;font-size:1rem;color:#fff;margin-top:6px}

#wrapper{display:none;gap:14px;margin-top:10px}
#board{display:grid;gap:var(--gap);background:var(--grid)}
.cell{width:var(--cell);height:var(--cell);background:#151a28;border-radius:3px}
.ghost{background:rgba(255,255,255,.15)}

.T{background:var(--T)}.O{background:var(--O)}.I{background:var(--I)}
.S{background:var(--S)}.Z{background:var(--Z)}.L{background:var(--L)}.J{background:var(--J)}

#side{display:flex;flex-direction:column;gap:8px;font-size:.85rem}
.panel{background:#1b2031;border-radius:8px;padding:6px 8px;min-width:90px}
.panel h3{margin:0 0 4px;font-size:.9rem}

.mini{display:grid;grid-template-columns:repeat(4,14px);
      grid-template-rows:repeat(4,14px);gap:1px;background:var(--grid)}
.mini div{width:14px;height:14px;background:#151a28;border-radius:2px}

#controls{display:none;
  grid-template-columns:repeat(3,50px);grid-template-rows:repeat(2,50px);
  gap:6px;margin:14px 0}
.btn{background:#333;border:2px solid #555;border-radius:8px;
     display:flex;align-items:center;justify-content:center;
     font-size:1.3rem;color:#fff}
.btn:active{background:#555}

/* ÌÅ∞ ÌôîÎ©¥ÏóêÏÑú ÏÖÄ ÌÇ§Ïö∞Í∏∞ */
@media(min-width:600px){
  :root{--cell:28px}
  .mini div{width:18px;height:18px}
  #controls{grid-template-columns:repeat(3,60px);
            grid-template-rows:repeat(2,60px)}
}
</style>
</head>
<!-- Part 2 / 5 : BODY Íµ¨Ï°∞ -->
<body>
<h1>üéÆ ÌÖåÌä∏Î¶¨Ïä§</h1>
<button id="start">Í≤åÏûÑ ÏãúÏûë</button>

<div id="wrapper">
  <!-- Î©îÏù∏ Î≥¥Îìú -->
  <div id="board"></div>

  <!-- Ïö∞Ï∏° Ìå®ÎÑê -->
  <div id="side">
    <div class="panel"><h3>Îã§Ïùå</h3><div id="next" class="mini"></div></div>
    <div class="panel"><h3>Î≥¥Î•ò</h3><div id="hold" class="mini"></div></div>
    <div class="panel"><h3>Ï†êÏàò</h3><div id="score">0</div></div>
    <div class="panel"><h3>Î†àÎ≤®</h3><div id="level">1</div></div>
    <div class="panel"><h3>Ï§Ñ</h3><div id="lines">0</div></div>
  </div>
</div>

<!-- Î™®Î∞îÏùº Ïª®Ìä∏Î°§ -->
<div id="controls">
  <div class="btn" id="left">‚¨ÖÔ∏è</div>
  <div class="btn" id="rotate">üîÑ</div>
  <div class="btn" id="right">‚û°Ô∏è</div>
  <div class="btn" style="grid-column:2/3" id="down">‚¨áÔ∏è</div>
  <div class="btn" style="grid-column:2/3" id="drop">üß®</div>
  <div class="btn" id="holdBtn">‚è∏Ô∏è</div>
</div>
<!-- Part 3 / 5 : JS - ÏÉÅÏàò¬∑Ï¥àÍ∏∞Ìôî -->
<script>
const ROWS=20,COLS=10;
const COLORS={I:'I',J:'J',L:'L',O:'O',S:'S',T:'T',Z:'Z'};
const SHAPES={
 I:[[0,1,2,3],[0,COLS,COLS*2,COLS*3]],
 O:[[0,1,COLS,COLS+1]],
 T:[[1,COLS,COLS+1,COLS+2],[1,COLS+1,COLS+2,COLS*2+1],
    [COLS,COLS+1,COLS+2,COLS*2+1],[1,COLS,COLS+1,COLS*2+1]],
 S:[[1,2,COLS,COLS+1],[0,COLS,COLS+1,COLS*2+1]],
 Z:[[0,1,COLS+1,COLS+2],[2,COLS+1,COLS+2,COLS*2+1]],
 J:[[0,COLS,COLS+1,COLS+2],[1,2,COLS+1,COLS*2+1],
    [COLS,COLS+1,COLS+2,COLS*2+2],[1,COLS+1,COLS*2,COLS*2+1]],
 L:[[2,COLS,COLS+1,COLS+2],[1,COLS+1,COLS*2+1,COLS*2+2],
    [COLS,COLS+1,COLS+2,COLS*2],[0,1,COLS+1,COLS*2+1]]
};

let board,cur,nextQ=[],hold=null,canHold=true;
let score=0,level=1,lines=0,interval=1000,timer,playing=false;

/* DOM */
const boardEl=document.getElementById('board');
const nextEl=document.getElementById('next');
const holdEl=document.getElementById('hold');
const scoreEl=document.getElementById('score');
const levelEl=document.getElementById('level');
const linesEl=document.getElementById('lines');
  <!-- Part 4 / 5 : JS - Î°úÏßÅ -->
function initBoard(){
  board=Array.from({length:ROWS},()=>Array(COLS).fill(0));
  boardEl.style.gridTemplateColumns=`repeat(${COLS},var(--cell))`;
  boardEl.style.gridTemplateRows=`repeat(${ROWS},var(--cell))`;
}

function rndType(){return Object.keys(SHAPES)[Math.floor(Math.random()*7)];}
function refill(){while(nextQ.length<5)nextQ.push(rndType());}

function miniDraw(el,type){
  el.innerHTML=''; for(let i=0;i<16;i++){el.appendChild(document.createElement('div')).className='cell';}
  if(!type)return; SHAPES[type][0].forEach(p=>el.children[p].classList.add(COLORS[type]));
}

function collision(pos,type,rot){
  return SHAPES[type][rot].some(o=>{
    const idx=pos+o,x=idx%COLS,y=idx/COLS|0;
    return x<0||x>=COLS||y>=ROWS||(y>=0&&board[y][x]);
  });
}

function ghostPos(){
  let p=cur.pos;
  while(!collision(p+COLS,cur.type,cur.rot))p+=COLS;
  return p;
}

function draw(){
  boardEl.innerHTML='';
  for(let r=0;r<ROWS;r++)for(let c=0;c<COLS;c++){
    const d=document.createElement('div');d.className='cell';if(board[r][c])d.classList.add(COLORS[board[r][c]],'frozen');boardEl.appendChild(d);
  }
  // Í≥†Ïä§Ìä∏
  SHAPES[cur.type][cur.rot].forEach(o=>{
    const idx=ghostPos()+o;if(idx>=0)boardEl.children[idx].classList.add('ghost',COLORS[cur.type]);
  });
  // ÌòÑÏû¨
  SHAPES[cur.type][cur.rot].forEach(o=>{
    const idx=cur.pos+o;if(idx>=0)boardEl.children[idx].classList.add(COLORS[cur.type],'active');
  });
}

function merge(){
  SHAPES[cur.type][cur.rot].forEach(o=>{
    const idx=cur.pos+o;if(idx>=0){const y=idx/COLS|0,x=idx%COLS;board[y][x]=cur.type;}
  });
}

function clearLines(){
  let removed=0;
  board=board.filter(row=>{if(row.every(v=>v)){removed++;return false;}return true;});
  while(board.length<ROWS)board.unshift(Array(COLS).fill(0));
  if(removed){
    score+=[0,100,300,500,800][removed]*level;
    lines+=removed;
    if(lines>=level*10){level++;interval=Math.max(100,1000-(level-1)*100);restartTimer();}
    updateHUD();
  }
}

function updateHUD(){
  scoreEl.textContent=score;levelEl.textContent=level;linesEl.textContent=lines;
}

function spawn(){
  cur={type:nextQ.shift(),rot:0,pos:3};
  refill();miniDraw(nextEl,nextQ[0]);canHold=true;
  if(collision(cur.pos,cur.type,0))return gameOver();
  draw();
}

function move(dx,dy){
  const p=cur.pos+dx+dy*COLS;
  if(!collision(p,cur.type,cur.rot)){cur.pos=p;draw();}
  else if(dy===1){merge();clearLines();spawn();}
}

function rotate(){
  const nr=(cur.rot+1)%SHAPES[cur.type].length;
  for(const k of [0,-1,1,-2,2])if(!collision(cur.pos+k,cur.type,nr)){cur.pos+=k;cur.rot=nr;draw();break;}
}

function hardDrop(){
  while(!collision(cur.pos+COLS,cur.type,cur.rot)){cur.pos+=COLS;score+=2;}
  merge();clearLines();spawn();updateHUD();
}

function holdSwap(){
  if(!canHold)return;
  [cur.type,hold]=(hold? [hold,cur.type]:[cur.type,cur.type]);
  cur.rot=0;cur.pos=3;miniDraw(holdEl,hold);canHold=false;
  if(collision(cur.pos,cur.type,0))return gameOver();
  draw();
}
  <!-- Part 5 / 5 : JS - Ïù¥Î≤§Ìä∏ & Ïä§ÌÉÄÌä∏ -->
function restartTimer(){clearInterval(timer);timer=setInterval(()=>move(0,1),interval);}

function gameOver(){
  playing=false;clearInterval(timer);
  alert(`Í≤åÏûÑ Ïò§Î≤Ñ! Ï†êÏàò ${score}`);document.getElementById('start').style.display='block';
  document.getElementById('wrapper').style.display='none';document.getElementById('controls').style.display='none';
}

function startGame(){
  score=level=lines=0;interval=1000;updateHUD();
  initBoard();refill();spawn();restartTimer();
  document.getElementById('start').style.display='none';
  document.getElementById('wrapper').style.display='flex';
  document.getElementById('controls').style.display='grid';playing=true;
}

/* Î≤ÑÌäº & ÌÇ§Î≥¥Îìú */
document.getElementById('start').onclick=startGame;
['left','right','down','rotate','drop','holdBtn'].forEach(id=>{
  document.getElementById(id).addEventListener('click',()=>{
    if(!playing)return;
    if(id==='left')move(-1,0);
    else if(id==='right')move(1,0);
    else if(id==='down')move(0,1);
    else if(id==='rotate')rotate();
    else if(id==='drop')hardDrop();
    else if(id==='holdBtn')holdSwap();
  });
});
document.addEventListener('keydown',e=>{
  if(!playing)return;
  if(e.key==='ArrowLeft')move(-1,0);
  else if(e.key==='ArrowRight')move(1,0);
  else if(e.key==='ArrowDown')move(0,1);
  else if(e.key==='ArrowUp')rotate();
  else if(e.key===' ')hardDrop();
  else if(e.key==='c'||e.key==='C'||e.key==='Shift')holdSwap();
});

/* ÏµúÏ¥à ÏÖÄ Íµ¨ÏÑ± */
initBoard(); /* ÎπàÌåê Í∑∏Î†§ÎÜìÍ∏∞ */
for(let r=0;r<ROWS;r++)for(let c=0;c<COLS;c++){
  const d=document.createElement('div');d.className='cell';boardEl.appendChild(d);
}
</script>\n</body>\n</html>"
    }
  ]
}
